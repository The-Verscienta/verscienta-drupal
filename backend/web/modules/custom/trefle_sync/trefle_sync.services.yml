services:
  trefle_sync.rate_limiter:
    class: Drupal\trefle_sync\TrefleRateLimiter
    arguments: ['@state']

  trefle_sync.field_mapper:
    class: Drupal\trefle_sync\TrefleFieldMapper
    arguments: ['@entity_type.manager']

  trefle_sync.image_handler:
    class: Drupal\trefle_sync\TrefleImageHandler
    arguments: ['@file_system', '@entity_type.manager', '@logger.factory', '@file.repository']

  trefle_sync.service:
    class: Drupal\trefle_sync\TrefleSyncService
    arguments:
      - '@http_client'
      - '@config.factory'
      - '@entity_type.manager'
      - '@logger.factory'
      - '@state'
      - '@key.repository'
      - '@trefle_sync.rate_limiter'
      - '@trefle_sync.field_mapper'
      - '@trefle_sync.image_handler'
